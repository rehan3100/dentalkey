workflows:
  ios-workflow:
    name: iOS Workflow
    instance_type: mac_mini
    environment:
      vars:
        FLUTTER_VERSION: stable
    scripts:
      - name: Set up Flutter
        script: |
          git clone https://github.com/flutter/flutter.git -b stable
          export PATH="$PATH:`pwd`/flutter/bin"
      - name: Install dependencies
        script: flutter pub get
      - name: Build iOS
        script: flutter build ios --release
    artifacts:
      - build/ios/ipa
    code_signing:
      app_store_connect:
        apple_id: $APPLE_ID
        password: $APPLE_PASSWORD
        team_id: $APPLE_TEAM_ID
        app_identifier: com.dentalkeybydrrehan.dentalkey
        distribute: false
    publishing:
      app_store_connect:
        apple_id: $APPLE_ID
        password: $APPLE_PASSWORD
        app_identifier: com.dentalkeybydrrehan.dentalkey
        ipa: build/ios/ipa/*.ipa
